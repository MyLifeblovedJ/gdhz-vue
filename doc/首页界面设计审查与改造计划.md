# 态势感知首页 · 界面设计审查与改造计划

> 综合两轮独立审查，按「立即可改 → 中期改造 → 长期规划」分级，每项给出具体改动位置和验收标准。

---

## 审查结论

当前首页视觉冲击力强，深蓝色海洋基调 + 四色预警体系 + 潮位/海浪动态波纹签名元素，已建立了鲜明的产品特征。但在 **指挥效率**（信息突出性）和 **精致度**（色彩/排版系统性）上有明显改进空间。

---

## 第一阶段：立即可改（P0）

> 以下问题改动量小、收益最大，可逐个独立完成。

### 1.1 关键数值无状态着色

**问题：** 潮位/浪高等核心数字不论正常还是超警，一律白色 `#ffffff`，领导无法一眼识别危险值。

**涉及文件：** [RealtimeDataPanel.vue](file:///Users/jianghong/IdeaProjects/gdhz-vue/gdhz-vue/src/components/layout/RealtimeDataPanel.vue)

**改法：**
```css
/* 为 .summary-item 的状态变体添加数值着色 */
.summary-item.alarm .summary-value { color: #f87171; text-shadow: 0 0 12px rgba(239,68,68,0.4); }
.summary-item.warn .summary-value  { color: #fbbf24; text-shadow: 0 0 10px rgba(245,158,11,0.3); }
```

**验收：** 超警数值显红色/橙色，正常数值保持白色。

---

### 1.2 摘要文本无结构化分层

**问题：** `panel-summary` 为纯文本长句，关键数字（站数、峰值、浪高）与普通文字一视同仁，认知负荷高。

**涉及文件：** [RealtimeDataPanel.vue](file:///Users/jianghong/IdeaProjects/gdhz-vue/gdhz-vue/src/components/layout/RealtimeDataPanel.vue)、[RightSidebar.vue](file:///Users/jianghong/IdeaProjects/gdhz-vue/gdhz-vue/src/components/layout/RightSidebar.vue)

**改法：**
1. 摘要模板中用 `<strong>` 包裹关键数值
2. 为 `.panel-summary strong` 添加高亮样式：
```css
.panel-summary strong {
  font-weight: 700;
  color: var(--text-primary);
}
.panel-summary.summary-alert strong { color: #f59e0b; }
.panel-summary.summary-storm-wave strong { color: #60a5fa; }
```
3. 每条摘要控制在 2 个核心数据点以内

**验收：** 摘要中的数字/站名有视觉突出，一眼可捕捉。

---

### 1.3 右侧折叠面板按风险状态自动展开

**问题：** 进入首页后右侧 4 个灾害面板缺少“风险优先”展开策略，重要预警/告警可能被折叠隐藏。

**涉及文件：** [RealtimeDataPanel.vue](file:///Users/jianghong/IdeaProjects/gdhz-vue/gdhz-vue/src/components/layout/RealtimeDataPanel.vue)（约 line 467-472）

**改法：**
```js
// 右侧4个面板：有预警/告警则展开；无预警/告警可保持收起
const expandedPanels = reactive({
  stormWave: false,
  erosion: false,
  saltwater: false,
  seawater: false
});

const hasRisk = (panelData) => panelData?.hasWarning || panelData?.hasAlarm;

watchEffect(() => {
  expandedPanels.stormWave = hasRisk(stormWaveData.value);
  expandedPanels.erosion = hasRisk(erosionData.value);
  expandedPanels.saltwater = hasRisk(saltwaterData.value);
  expandedPanels.seawater = hasRisk(seawaterData.value);
});
```
如需保留人工展开，建议增加“用户手动锁定展开态”标记，避免自动逻辑覆盖用户操作。

**验收：**
1. 任一灾害面板出现预警或告警时，面板自动展开并展示核心指标
2. 无预警/告警的面板默认保持收起
3. 风险解除后面板可自动恢复收起（或按产品策略保留手动态）

---

### 1.4 面板标题颜色无区分

**问题：** 左侧三个面板（当前预警、AI态势、决策建议）的标题默认都是 cyan，用户无法通过颜色快速定位。

**涉及文件：** [RightSidebar.vue](file:///Users/jianghong/IdeaProjects/gdhz-vue/gdhz-vue/src/components/layout/RightSidebar.vue)

**改法：** 为每个面板的 `.panel-title` 和 `::before` 发光线使用专属色系：
- 当前预警 → `#ef4444`（红系）
- AI 态势摘要 → `#10b981`（绿系，已有）
- 决策建议 → `#3b82f6`（蓝系，已有但未生效检查）

**验收：** 三个面板标题颜色各异，与顶部发光线颜色一致。

---

## 第二阶段：中期改造（P1-P2）

> 需要一定重构，建议逐模块推进。

### 2.1 信息减法——右栏灾害面板精简

**问题：** 右侧 `RealtimeDataPanel` 单组件 2827 行，4 类灾害各自堆叠深层卡片 + 多重滚动区，认知负荷过高。

**改法：**
1. 每类灾害默认只展示 **3 个关键指标 + 1 个动作按钮**
2. 详细趋势图、站点列表进入**二级面板**（点击展开或路由跳转），不在首页堆叠
3. 考虑将 4 个灾害面板提取为独立子组件，降低单文件复杂度

**验收：** 右栏折叠态下信息密度降低 50%，展开态内容不超过 1 屏（无需滚动即可纵览核心指标）。

---

### 2.2 可读性底线

**问题：** 大量 8px/9px/10px 文字在深蓝背景上对比度不足。

**改法：**
1. **正文最小 12px**，当前 8px/9px 的标签合并为 10px 或 11px
2. **关键数字 14-16px**（当前部分 `pred-label` 仅 9px）
3. 风险状态不能只靠颜色，要加 **图标+文案双编码**（目前部分已有 ✅，需补全）
4. 在 `variables.css` 中建立间距系统：
```css
--space-1: 4px;   /* 微间距 */
--space-2: 8px;   /* 组件内 */
--space-3: 12px;  /* 卡片内 */
--space-4: 16px;  /* 区块间 */
--space-6: 24px;  /* 主区域间 */
```

---

### 2.3 动效优化

**问题：** 持续动画过多（跑马灯闪烁、侧栏脉冲、图标缩放），干扰监测判断。

**改法：**
1. **保留**：跑马灯滚动、台风高亮、红色预警状态脉冲
2. **改为事件触发**：预警图标缩放（改为新预警出现时触发一次）、侧栏红色呼吸（改为高风险切换时触发 3 次后停止）
3. **全局支持** `prefers-reduced-motion`：
```css
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.01ms !important; }
}
```

---

### 2.4 功能色收敛

**问题：** 同一视口内出现 8+ 种功能色，视觉重点被稀释。

**改法：**
- **语义色（保留）：** 四色预警红/橙/黄/蓝 + 正常绿 = 5 色
- **界面色（统一）：** 面板标题、交互元素、分区标记收敛到 cyan + 各面板身份色
- **AI 模块：** 保留紫色差异（行业惯例），但降低光晕强度，不用紫色做面板标题

---

## 第三阶段：长期规划（P3）

> 需要产品决策或真实后端对接，记录备查。

### 3.1 响应式布局策略

| 断点 | 方案 |
|------|------|
| ≥1920px | 当前双侧栏布局 |
| 1366-1919px | 右栏改为可收起抽屉 |
| ≤1365px | 双侧栏均抽屉化 |

**前提：** 明确系统部署场景（大屏指挥中心 vs. 笔记本访问）后再决定优先级。

### 3.2 固定定位清理

所有 `position: fixed/absolute` + 魔法数字（`right: 360px`, `top: 88px` 等）改为跟随容器布局。在响应式改造时一并处理。

### 3.3 去演示化

在对接真实 API 时自然完成：
1. `alert()` / `console.log()` 替换为真实流程入口（或禁用态 + 原因说明）
2. mock 数据替换为接口数据
3. 所有关键数据卡补 **「更新时间」和「数据来源」** 标签
4. AI 回复对接真实模型接口

### 3.4 无障碍补全

为关键交互元素补充 `aria-*` 标注（对内部指挥系统优先级较低，但长期应合规）。

---

## 改造检查清单

- [ ] **P0-1.1** 数值状态着色（RealtimeDataPanel 样式）
- [ ] **P0-1.2** 摘要文本高亮（RealtimeDataPanel + RightSidebar 模板/样式）
- [ ] **P0-1.3** 按预警/告警状态自动展开面板（RealtimeDataPanel JS）
- [ ] **P0-1.4** 面板标题颜色区分（RightSidebar 样式）
- [ ] **P1-2.1** 信息减法 / 灾害面板精简
- [ ] **P1-2.2** 可读性底线 / 间距系统
- [ ] **P2-2.3** 动效优化
- [ ] **P2-2.4** 功能色收敛
- [ ] **P3-3.1** 响应式布局
- [ ] **P3-3.2** 固定定位清理
- [ ] **P3-3.3** 去演示化
- [ ] **P3-3.4** 无障碍补全
